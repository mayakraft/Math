!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(n="undefined"!=typeof globalThis?globalThis:n||self).math=t()}(this,(function(){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(t)}function t(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null==r)return;var i,e,o=[],u=!0,c=!1;try{for(r=r.call(n);!(u=(i=r.next()).done)&&(o.push(i.value),!t||o.length!==t);u=!0);}catch(n){c=!0,e=n}finally{try{u||null==r.return||r.return()}finally{if(c)throw e}}return o}(n,t)||i(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(n){return function(n){if(Array.isArray(n))return e(n)}(n)||function(n){if("undefined"!=typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(n)||i(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(n,t){if(n){if("string"==typeof n)return e(n,t);var r=Object.prototype.toString.call(n).slice(8,-1);return"Object"===r&&n.constructor&&(r=n.constructor.name),"Map"===r||"Set"===r?Array.from(n):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?e(n,t):void 0}}function e(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=n[r];return i}var o=function(t){switch(t.constructor.name){case"vector":case"matrix":case"segment":case"ray":case"line":case"circle":case"ellipse":case"rect":case"polygon":return t.constructor.name}if("object"===n(t)){if(null!=t.radius)return"circle";if(null!=t.width)return"rect";if(null!=t.x||"number"==typeof t[0])return"vector";if(null!=t[0]&&t[0].length&&("number"==typeof t[0].x||"number"==typeof t[0][0]))return"segment";if(null!=t.vector&&null!=t.origin)return"line"}},u=function(n,t){return t.length===n?t:Array(n).fill(0).map((function(n,r){return t[r]?t[r]:n}))},c=function(n,t){var r=n.length>t.length?n.length:t.length;return[n,t].map((function(n){return u(r,n)}))},a=function(n){var t="".concat(n).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return t?Math.max(0,(t[1]?t[1].length:0)-(t[2]?+t[2]:0)):0},f=function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:15;if("number"!=typeof n)return n;var r=parseFloat(n.toFixed(t));return a(r)===Math.min(t,a(n))?n:r},s=function(n){return null!=n&&"function"==typeof n[Symbol.iterator]},l=function n(){switch(arguments.length){case void 0:case 0:return Array.from(arguments);case 1:return s(arguments[0])&&"string"!=typeof arguments[0]?n.apply(void 0,r(arguments[0])):[arguments[0]];default:return Array.from(arguments).map((function(t){return s(t)?r(n(t)):t}))}},h=function n(){switch(arguments.length){case void 0:case 0:return Array.from(arguments);case 1:return s(arguments[0])&&"string"!=typeof arguments[0]?n.apply(void 0,r(arguments[0])):[arguments[0]];default:return Array.from(arguments).map((function(t){return s(t)?r(n(t)):t})).reduce((function(n,t){return n.concat(t)}),[])}},p=Object.freeze({__proto__:null,resize:u,resizeUp:c,resizeDown:function(n,t){var r=n.length>t.length?t.length:n.length;return[n,t].map((function(n){return u(r,n)}))},cleanNumber:f,semiFlattenArrays:l,flattenArrays:h}),v=Object.create(null),g=1e-6,d=180/Math.PI,m=Math.PI/180,y=2*Math.PI,M=Object.freeze({__proto__:null,EPSILON:g,R2D:d,D2R:m,TWO_PI:y}),b=function(){return!0},x=function(n){return n*n},_=function(n,t){return n+(t||0)},P=function(n){return void 0!==n},A=function(n){return Math.atan2(n[1],n[0])},w=function(n){return[Math.cos(n),Math.sin(n)]},j=function(n,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:g;return Math.abs(n-t)<r},O=function(n,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:g;return j(n,t,r)?0:Math.sign(t-n)},S=function(n,t){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:g,i=0;i<Math.max(n.length,t.length);i+=1)if(!j(n[i]||0,t[i]||0,r))return!1;return!0},k=function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:g;return n>-t},I=function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:g;return n>t},z=b,C=b,L=k,N=I,E=function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:g;return n>-t&&n<1+t},q=function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:g;return n>t&&n<1-t},R=function(n){return n<-g?0:n},T=function(n){return n<-g?0:n>1.000001?1:n},G=Object.freeze({__proto__:null,fnTrue:b,fnSquare:x,fnAdd:_,fnNotUndefined:P,fnAnd:function(n,t){return n&&t},fnCat:function(n,t){return n.concat(t)},fnVec2Angle:A,fnToVec2:w,fnEqual:function(n,t){return n===t},fnEpsilonEqual:j,fnEpsilonSort:O,fnEpsilonEqualVectors:S,include:k,exclude:I,includeL:z,excludeL:C,includeR:L,excludeR:N,includeS:E,excludeS:q,lineLimiter:function(n){return n},rayLimiter:R,segmentLimiter:T}),V=function(n){return Math.sqrt(n.map(x).reduce(_,0))},B=function(n){return Math.sqrt(n[0]*n[0]+n[1]*n[1])},D=function(n){return n.map(x).reduce(_,0)},F=function(n){var t=V(n);return 0===t?n:n.map((function(n){return n/t}))},Z=function(n){var t=B(n);return 0===t?n:[n[0]/t,n[1]/t]},U=function(n,t){return n.map((function(n){return n*t}))},H=function(n,t){return[n[0]*t,n[1]*t]},X=function(n,t){return n.map((function(n,r){return n+(t[r]||0)}))},Y=function(n,t){return[n[0]+t[0],n[1]+t[1]]},$=function(n,t){return n.map((function(n,r){return n-(t[r]||0)}))},W=function(n,t){return[n[0]-t[0],n[1]-t[1]]},J=function(n,t){return n.map((function(r,i){return n[i]*t[i]})).reduce(_,0)},K=function(n,t){return n[0]*t[0]+n[1]*t[1]},Q=function(n,t){return n.map((function(n,r){return(n+t[r])/2}))},nn=function(){var n=arguments;if(0===arguments.length)return[];var t=arguments[0].length>0?arguments[0].length:0,r=Array(t).fill(0);return Array.from(arguments).forEach((function(n){return r.forEach((function(t,i){r[i]+=n[i]||0}))})),r.map((function(t){return t/n.length}))},tn=function(n,t,r){var i=1-r;return n.map((function(n,e){return n*i+(t[e]||0)*r}))},rn=function(n,t){return n[0]*t[1]-n[1]*t[0]},en=function(n,t){return[n[1]*t[2]-n[2]*t[1],n[2]*t[0]-n[0]*t[2],n[0]*t[1]-n[1]*t[0]]},on=function(n,t){return Math.sqrt(n.map((function(r,i){return Math.pow(n[i]-t[i],2)})).reduce(_,0))},un=function(n,t){var r=n[0]-t[0],i=n[1]-t[1];return Math.sqrt(r*r+i*i)},cn=function(n){return n.map((function(n){return-n}))},an=function(n){return[-n[1],n[0]]},fn=function(n){return[n[1],-n[0]]},sn=function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:g;return n.map((function(n){return Math.abs(n)})).reduce(_,0)<t},ln=function(n,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:g;return 1-Math.abs(J(F(n),F(t)))<r},hn=Object.freeze({__proto__:null,magnitude:V,magnitude2:B,magSquared:D,normalize:F,normalize2:Z,scale:U,scale2:H,add:X,add2:Y,subtract:$,subtract2:W,dot:J,dot2:K,midpoint:Q,midpoint2:function(n,t){return H(Y(n,t),.5)},average:nn,lerp:tn,cross2:rn,cross3:en,distance:on,distance2:un,distance3:function(n,t){var r=n[0]-t[0],i=n[1]-t[1],e=n[2]-t[2];return Math.sqrt(r*r+i*i+e*e)},flip:cn,rotate90:an,rotate270:fn,degenerate:sn,parallel:ln,parallel2:function(n,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:g;return Math.abs(rn(n,t))<r}}),pn=Object.freeze([1,0,0,0,1,0,0,0,1]),vn=Object.freeze(pn.concat(0,0,0)),gn=function(n){return vn.map((function(t,r){return Math.abs(t-n[r])<g})).reduce((function(n,t){return n&&t}),!0)},dn=function(n,t){return[n[0]*t[0]+n[3]*t[1]+n[6]*t[2]+n[9],n[1]*t[0]+n[4]*t[1]+n[7]*t[2]+n[10],n[2]*t[0]+n[5]*t[1]+n[8]*t[2]+n[11]]},mn=function(n,t,r){return{vector:[n[0]*t[0]+n[3]*t[1]+n[6]*t[2],n[1]*t[0]+n[4]*t[1]+n[7]*t[2],n[2]*t[0]+n[5]*t[1]+n[8]*t[2]],origin:[n[0]*r[0]+n[3]*r[1]+n[6]*r[2]+n[9],n[1]*r[0]+n[4]*r[1]+n[7]*r[2]+n[10],n[2]*r[0]+n[5]*r[1]+n[8]*r[2]+n[11]]}},yn=function(n,t){return[n[0]*t[0]+n[3]*t[1]+n[6]*t[2],n[1]*t[0]+n[4]*t[1]+n[7]*t[2],n[2]*t[0]+n[5]*t[1]+n[8]*t[2],n[0]*t[3]+n[3]*t[4]+n[6]*t[5],n[1]*t[3]+n[4]*t[4]+n[7]*t[5],n[2]*t[3]+n[5]*t[4]+n[8]*t[5],n[0]*t[6]+n[3]*t[7]+n[6]*t[8],n[1]*t[6]+n[4]*t[7]+n[7]*t[8],n[2]*t[6]+n[5]*t[7]+n[8]*t[8],n[0]*t[9]+n[3]*t[10]+n[6]*t[11]+n[9],n[1]*t[9]+n[4]*t[10]+n[7]*t[11]+n[10],n[2]*t[9]+n[5]*t[10]+n[8]*t[11]+n[11]]},Mn=function(n){return n[0]*n[4]*n[8]-n[0]*n[7]*n[5]-n[3]*n[1]*n[8]+n[3]*n[7]*n[2]+n[6]*n[1]*n[5]-n[6]*n[4]*n[2]},bn=function(n){var t=Mn(n);if(!(Math.abs(t)<1e-6||Number.isNaN(t))&&Number.isFinite(n[9])&&Number.isFinite(n[10])&&Number.isFinite(n[11])){var r=[n[4]*n[8]-n[7]*n[5],-n[1]*n[8]+n[7]*n[2],n[1]*n[5]-n[4]*n[2],-n[3]*n[8]+n[6]*n[5],n[0]*n[8]-n[6]*n[2],-n[0]*n[5]+n[3]*n[2],n[3]*n[7]-n[6]*n[4],-n[0]*n[7]+n[6]*n[1],n[0]*n[4]-n[3]*n[1],-n[3]*n[7]*n[11]+n[3]*n[8]*n[10]+n[6]*n[4]*n[11]-n[6]*n[5]*n[10]-n[9]*n[4]*n[8]+n[9]*n[5]*n[7],n[0]*n[7]*n[11]-n[0]*n[8]*n[10]-n[6]*n[1]*n[11]+n[6]*n[2]*n[10]+n[9]*n[1]*n[8]-n[9]*n[2]*n[7],-n[0]*n[4]*n[11]+n[0]*n[5]*n[10]+n[3]*n[1]*n[11]-n[3]*n[2]*n[10]-n[9]*n[1]*n[5]+n[9]*n[2]*n[4]],i=1/t;return r.map((function(n){return n*i}))}},xn=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return pn.concat(n,t,r)},_n=function(n,t,r,i,e){var o=pn.concat([0,1,2].map((function(n){return t[n]||0}))),u=Math.cos(n),c=Math.sin(n);return o[3*r+r]=u,o[3*r+i]=(e?1:-1)*c,o[3*i+r]=(e?-1:1)*c,o[3*i+i]=u,o},Pn=function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0];return _n(n,t,1,2,!0)},An=function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0];return _n(n,t,0,2,!1)},wn=function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0];return _n(n,t,0,1,!0)},jn=function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,0,0],e=[0,1,2].map((function(n){return i[n]||0})),o=u(3,F(r)),c=t(o,3),a=c[0],f=c[1],s=c[2],l=Math.cos(n),h=Math.sin(n),p=1-l,v=pn.concat(-e[0],-e[1],-e[2]),g=pn.concat(e[0],e[1],e[2]);return yn(g,yn([p*a*a+l,p*f*a+s*h,p*s*a-f*h,p*a*f-s*h,p*f*f+l,p*s*f+a*h,p*a*s+f*h,p*f*s-a*h,p*s*s+l,0,0,0],v))},On=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0];return[n,0,0,0,n,0,0,0,n,n*-t[0]+t[0],n*-t[1]+t[1],n*-t[2]+t[2]]},Sn=function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0],r=Math.atan2(n[1],n[0]),i=Math.cos(r),e=Math.sin(r),o=Math.cos(-r),u=Math.sin(-r),c=i*o+e*u,a=i*-u+e*o,f=e*o+-i*u,s=e*-u+-i*o,l=t[0]+c*-t[0]+-t[1]*f,h=t[1]+a*-t[0]+-t[1]*s;return[c,a,0,f,s,0,0,0,1,l,h,0]},kn=Object.freeze({__proto__:null,identity3x3:pn,identity3x4:vn,isIdentity3x4:gn,multiplyMatrix3Vector3:dn,multiplyMatrix3Line3:mn,multiplyMatrices3:yn,determinant3:Mn,invertMatrix3:bn,makeMatrix3Translate:xn,makeMatrix3RotateX:Pn,makeMatrix3RotateY:An,makeMatrix3RotateZ:wn,makeMatrix3Rotate:jn,makeMatrix3Scale:On,makeMatrix3ReflectZ:Sn}),In=function(n,t){return{vector:n||[],origin:t||[]}},zn=function(){if(arguments[0]instanceof v.vector)return arguments[0];var t=h(arguments);return t.length>0&&"object"===n(t[0])&&null!==t[0]&&!Number.isNaN(t[0].x)&&(t=["x","y","z"].map((function(n){return t[0][n]})).filter(P)),t.filter((function(n){return"number"==typeof n}))},Cn=function(){return l(arguments).map((function(n){return zn(n)}))},Ln=function(){if(arguments[0]instanceof v.segment)return arguments[0];var n=l(arguments);return 4===n.length?[[n[0],n[1]],[n[2],n[3]]]:n.map((function(n){return zn(n)}))},Nn=function(){var n=l(arguments);return 0===n.length?In([],[]):n[0]instanceof v.line||n[0]instanceof v.ray||n[0]instanceof v.segment?n[0]:n[0].constructor===Object&&void 0!==n[0].vector?In(n[0].vector||[],n[0].origin||[]):"number"==typeof n[0]?In(zn(n)):In.apply(void 0,r(n.map((function(n){return zn(n)}))))},En=Nn,qn=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return{x:n,y:t,width:r,height:i}},Rn=function(){if(arguments[0]instanceof v.rect)return arguments[0];var t=h(arguments);if(t.length>0&&"object"===n(t[0])&&null!==t[0]&&!Number.isNaN(t[0].width))return qn.apply(void 0,r(["x","y","width","height"].map((function(n){return t[0][n]})).filter(P)));var i=t.filter((function(n){return"number"==typeof n})),e=i.length<4?[,,].concat(r(i)):i;return qn.apply(void 0,r(e))},Tn=function(){for(var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return{radius:n,origin:[].concat(r)}},Gn=function(){if(arguments[0]instanceof v.circle)return arguments[0];var n=Cn(arguments),t=h(arguments).filter((function(n){return"number"==typeof n}));if(2===arguments.length){if(1===n[1].length)return Tn.apply(void 0,[n[1][0]].concat(r(n[0])));if(1===n[0].length)return Tn.apply(void 0,[n[0][0]].concat(r(n[1])));if(n[0].length>1&&n[1].length>1)return Tn.apply(void 0,[un.apply(void 0,r(n))].concat(r(n[0])))}else switch(t.length){case 0:return Tn(1,0,0,0);case 1:return Tn(t[0],0,0,0);default:return Tn.apply(void 0,[t.pop()].concat(r(t)))}return Tn(1,0,0,0)},Vn=[[0,1,3,4,9,10],[0,1,2,3,4,5,6,7,8,9,10,11],[0,1,2,void 0,3,4,5,void 0,6,7,8,void 0,9,10,11]];[11,7,3].forEach((function(n){return delete Vn[2][n]}));var Bn=function(n){return Vn[n<8?0:n<13?1:2]},Dn=function(){var n=h(arguments),t=r(vn);return Bn(n.length).forEach((function(r,i){null!=n[i]&&(t[r]=n[i])})),t},Fn=Object.freeze({__proto__:null,getVector:zn,getVectorOfVectors:Cn,getSegment:Ln,getLine:Nn,getRay:En,getRectParams:qn,getRect:Rn,getCircle:Gn,getMatrix3x4:Dn}),Zn=function(n){var t=n.vector,r=n.origin,i=V(t),e=an(t),o=J(r,e)/i;return{normal:U(e,1/i),distance:o}},Un=function(n){var t=n.normal,r=n.distance;return{vector:fn(t),origin:U(t,r)}},Hn=Object.freeze({__proto__:null,rayLineToUniqueLine:Zn,uniqueLineToRayLine:Un}),Xn=function(n,t,r){for(var i,e=t.map((function(t,i){return{o:t,i:i,d:r(n,t)}})),o=1/0,u=0;u<e.length;u+=1)e[u].d<o&&(i=u,o=e[u].d);return i},Yn=function(n){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:O,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:g,i=[0],e=1;e<n.length;e+=1)switch(t(n[e][0],n[i[0]][0],r)){case 0:i.push(e);break;case 1:i=[e]}return i},$n=function(n){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:g,r=Yn(n,O,t),i=0,e=1;e<r.length;e+=1)n[r[e]][1]<n[r[i]][1]&&(i=e);return r[i]},Wn=function(n,t,r,i){var e=arguments.length>4&&void 0!==arguments[4]?arguments[4]:g;t=u(n.length,t),r=u(n.length,r);var o=D(n),c=$(r,t),a=J(n,c),f=a/o,s=i(f,e);return X(t,U(n,s))},Jn=function(n,t){var r=n.map((function(n,t,r){return $(r[(t+1)%r.length],n)}));return n.map((function(n,i){return Wn(r[i],n,t,T)})).map((function(n,r){return{point:n,i:r,distance:on(n,t)}})).sort((function(n,t){return n.distance-t.distance})).shift()},Kn=function(n,t,r){return X(t,U(F($(r,t)),n))},Qn=Object.freeze({__proto__:null,smallestComparisonSearch:Xn,minimum2DPointIndex:$n,nearestPoint2:function(n,t){var r=Xn(n,t,un);return void 0===r?void 0:t[r]},nearestPoint:function(n,t){var r=Xn(n,t,on);return void 0===r?void 0:t[r]},nearestPointOnLine:Wn,nearestPointOnPolygon:Jn,nearestPointOnCircle:Kn}),nt=function(n){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:g,r=[[0]],i=0,e=1;e<n.length;e+=1)j(n[e],n[e-1],t)?r[i].push(e):(i=r.length,r.push([e]));return r},tt=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:g,r=$n(n,t),i=n.map((function(t){return W(t,n[r])})).map((function(n){return Z(n)})).map((function(n){return K([0,1],n)})),e=i.map((function(n,t){return{a:n,i:t}})).sort((function(n,t){return n.a-t.a})).map((function(n){return n.i})).filter((function(n){return n!==r}));return[[r]].concat(nt(e.map((function(n){return i[n]})),t).map((function(n){return n.map((function(n){return e[n]}))})).map((function(t){return 1===t.length?t:t.map((function(t){return{i:t,len:un(n[t],n[r])}})).sort((function(n,t){return n.len-t.len})).map((function(n){return n.i}))})))},rt=Object.freeze({__proto__:null,sortPointsAlongVector2:function(n,t){return n.map((function(n){return{point:n,d:n[0]*t[0]+n[1]*t[1]}})).sort((function(n,t){return n.d-t.d})).map((function(n){return n.point}))},clusterIndicesOfSortedNumbers:nt,radialSortPointIndices:tt}),it=[1,0,0,1],et=it.concat(0,0),ot=function(n){return n[0]*n[3]-n[1]*n[2]},ut=function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0],r=Math.cos(n),i=Math.sin(n);return[r,i,-i,r,t[0],t[1]]},ct=Object.freeze({__proto__:null,identity2x2:it,identity2x3:et,multiplyMatrix2Vector2:function(n,t){return[n[0]*t[0]+n[2]*t[1]+n[4],n[1]*t[0]+n[3]*t[1]+n[5]]},multiplyMatrix2Line2:function(n,t,r){return{vector:[n[0]*t[0]+n[2]*t[1],n[1]*t[0]+n[3]*t[1]],origin:[n[0]*r[0]+n[2]*r[1]+n[4],n[1]*r[0]+n[3]*r[1]+n[5]]}},multiplyMatrices2:function(n,t){return[n[0]*t[0]+n[2]*t[1],n[1]*t[0]+n[3]*t[1],n[0]*t[2]+n[2]*t[3],n[1]*t[2]+n[3]*t[3],n[0]*t[4]+n[2]*t[5]+n[4],n[1]*t[4]+n[3]*t[5]+n[5]]},determinant2:ot,invertMatrix2:function(n){var t=ot(n);if(!(Math.abs(t)<1e-6||Number.isNaN(t))&&Number.isFinite(n[4])&&Number.isFinite(n[5]))return[n[3]/t,-n[1]/t,-n[2]/t,n[0]/t,(n[2]*n[5]-n[3]*n[4])/t,(n[1]*n[4]-n[0]*n[5])/t]},makeMatrix2Translate:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return it.concat(n,t)},makeMatrix2Scale:function(n,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,0];return[n,0,0,t,n*-r[0]+r[0],t*-r[1]+r[1]]},makeMatrix2Rotate:ut,makeMatrix2Reflect:function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0],r=Math.atan2(n[1],n[0]),i=Math.cos(r),e=Math.sin(r),o=Math.cos(-r),u=Math.sin(-r),c=i*o+e*u,a=i*-u+e*o,f=e*o+-i*u,s=e*-u+-i*o,l=t[0]+c*-t[0]+-t[1]*f,h=t[1]+a*-t[0]+-t[1]*s;return[c,a,f,s,l,h]}}),at=function(n,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:I,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:g;return n.map((function(n,t,r){return[n,r[(t+1)%r.length]]})).map((function(n){return rn(F($(n[1],n[0])),$(t,n[0]))})).map((function(n){return r(n,i)})).map((function(n,t,r){return n===r[0]})).reduce((function(n,t){return n&&t}),!0)},ft=function(n,t,r){return X(t,U(n,r))},st=function(n,t,r,i,e){return n.map((function(n,t,r){return[$(r[(t+1)%r.length],n),n]})).map((function(n){return function(n,t,r,i){var e=arguments.length>4&&void 0!==arguments[4]?arguments[4]:E,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:g,u=rn(F(n),F(r));if(!(Math.abs(u)<o)){var c=rn(n,r),a=-c,f=$(i,t),s=cn(f),l=rn(f,r)/c;return e(rn(s,n)/a,o/V(r))?l:void 0}}(t,r,n[0],n[1],i,e)})).filter(P).sort((function(n,t){return n-t}))},lt=function(n,t,r){for(var i=0,e=n.length-1;i<e&&!t(n[i+1]-n[i],r);)i+=1;for(;e>i&&!t(n[e]-n[e-1],r);)e-=1;if(!(i>=e))return[n[i],n[e]]},ht=function(n,t,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:k,e=arguments.length>4&&void 0!==arguments[4]?arguments[4]:z,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:g,u=st(n,t,r,E,o);if(!(u.length<2)){var c=2*o/V(t),a=lt(u,i,c);if(void 0!==a){var f=a.map((function(n){return e(n)?n:n<.5?0:1}));if(!(Math.abs(f[0]-f[1])<2*o/V(t))){var s=ft(t,r,(f[0]+f[1])/2);return at(n,s,i,o)?f.map((function(n){return ft(t,r,n)})):void 0}}}},pt=function(n,t){for(;n<0;)n+=y;for(;t<0;)t+=y;for(;n>y;)n-=y;for(;t>y;)t-=y;var r=n-t;return r>=0?r:y-(t-n)},vt=function(n,t){for(;n<0;)n+=y;for(;t<0;)t+=y;for(;n>y;)n-=y;for(;t>y;)t-=y;var r=t-n;return r>=0?r:y-(n-t)},gt=function(n,t){var r=t[0]*n[0]+t[1]*n[1],i=t[0]*n[1]-t[1]*n[0],e=Math.atan2(i,r);return e<0&&(e+=y),e},dt=function(n,t){var r=n[0]*t[0]+n[1]*t[1],i=n[0]*t[1]-n[1]*t[0],e=Math.atan2(i,r);return e<0&&(e+=y),e},mt=function(n,t){return w(A(n)-gt(n,t)/2)},yt=function(n,t){return w(A(n)+dt(n,t)/2)},Mt=function(n,t,r){var i=pt(t,r)/n;return Array.from(Array(n-1)).map((function(n,r){return t+i*(r+1)}))},bt=function(n,t,r){var i=vt(t,r)/n;return Array.from(Array(n-1)).map((function(n,r){return t+i*(r+1)}))},xt=function(n,t,r){var i=Math.atan2(t[1],t[0]),e=Math.atan2(r[1],r[0]);return Mt(n,i,e).map(w)},_t=function(n,t,r){var i=Math.atan2(t[1],t[0]),e=Math.atan2(r[1],r[0]);return bt(n,i,e).map(w)},Pt=function(n,t,i,e){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:g,u=rn(n,i),c=J(n,i),a=u>-o?[yt(n,i)]:[mt(n,i)];a[1]=u>-o?an(a[0]):fn(a[0]);var f=(e[0]-t[0])*i[1]-i[0]*(e[1]-t[1]),s=f/u,l=[n,i].map((function(n){return F(n)})),h=Math.abs(rn.apply(void 0,r(l)))<o,p=h?Q(t,e):[t[0]+n[0]*s,t[1]+n[1]*s],v=a.map((function(n){return{vector:n,origin:p}}));return h&&delete v[c>-o?1:0],v},At=function(){var n=Array.from(arguments).flat(),t=n.map((function(n,t){return t})).sort((function(t,r){return n[t]-n[r]}));return t.slice(t.indexOf(0),t.length).concat(t.slice(0,t.indexOf(0)))},wt=function(){var n=Array.from(arguments).flat(),t=At(n).map((function(t){return n[t]}));return t.map((function(n,t,r){return[n,r[(t+1)%r.length]]})).map((function(n){return vt(n[0],n[1])}))},jt=function(n,t,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:g,e=Z(W(t,n)),o=Z(W(r,n)),u=rn(e,o);return j(u,0,i)?j(un(n,t)+un(t,r),un(n,r))?0:void 0:Math.sign(u)},Ot=Object.freeze({__proto__:null,isCounterClockwiseBetween:function(n,t,r){for(;r<t;)r+=y;for(;n>t;)n-=y;for(;n<t;)n+=y;return n<r},clockwiseAngleRadians:pt,counterClockwiseAngleRadians:vt,clockwiseAngle2:gt,counterClockwiseAngle2:dt,clockwiseBisect2:mt,counterClockwiseBisect2:yt,clockwiseSubsectRadians:Mt,counterClockwiseSubsectRadians:bt,clockwiseSubsect2:xt,counterClockwiseSubsect2:_t,bisectLines2:Pt,counterClockwiseOrderRadians:At,counterClockwiseOrder2:function(){return At(l(arguments).map(A))},counterClockwiseSectorsRadians:wt,counterClockwiseSectors2:function(){return wt(Cn(arguments).map(A))},threePointTurnDirection:jt}),St=function(n){return n.concat(n.slice(0,-1).reverse())},kt=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:g;if(n.length<2)return[];var e=tt(n,i).map((function(n){return 1===n.length?n:St(n)})).flat();e.push(e[0]);var o=[e[0]],u=1,c={"-1":function(){return o.pop()},1:function(n){o.push(n),u+=1},undefined:function(){u+=1}};for(c[0]=t?c[1]:c[-1];u<e.length;)if(o.length<2)o.push(e[u]),u+=1;else{var a=o[o.length-2],f=o[o.length-1],s=e[u],l=jt.apply(void 0,r([a,f,s].map((function(t){return n[t]}))).concat([i]));c[l](s)}return o.pop(),o},It=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:g;return kt(n,t,r).map((function(t){return n[t]}))},zt=Object.freeze({__proto__:null,convexHullIndices:kt,convexHullPoints:It}),Ct=function(n,t,r,i){var e=arguments.length>4&&void 0!==arguments[4]?arguments[4]:z,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:z,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:g,c=rn(F(n),F(r));if(!(Math.abs(c)<u)){var a=rn(n,r),f=-a,s=[i[0]-t[0],i[1]-t[1]],l=[-s[0],-s[1]],h=rn(s,r)/a,p=rn(l,n)/f;return e(h,u/V(n))&&o(p,u/V(r))?X(t,U(n,h)):void 0}},Lt=Object.freeze({__proto__:null,pleat:function(n,t,i){var e=Nn(t),o=Nn(i);return ln(e.vector,o.vector)?function(n,t,i){var e=Array.from(Array(n-1)).map((function(t,r){return(r+1)/n})).map((function(n){return tn(t.origin,i.origin,n)})),o=r(t.vector);return e.map((function(n){return{origin:n,vector:o}}))}(n,e,o):function(n,t,r){var i=Ct(t.vector,t.origin,r.vector,r.origin);return(gt(t.vector,r.vector)<dt(t.vector,r.vector)?xt(n,t.vector,r.vector):_t(n,t.vector,r.vector)).map((function(n){return{origin:i,vector:n}}))}(n,e,o)}}),Nt=function(n){return Array.from(Array(Math.floor(n))).map((function(t,r){return y*(r/n)}))},Et=function(n,t){return n.map((function(n){return[t*Math.cos(n),t*Math.sin(n)]})).map((function(n){return n.map((function(n){return f(n,14)}))}))},qt=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Et(Nt(n),t)},Rt=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=Math.PI/n,i=Nt(n).map((function(n){return n+r}));return Et(i,t)},Tt=function(n,t,r){var i=t[0]-n[0],e=t[1]-n[1],o=r[0]-n[0],u=r[1]-n[1],c=i*(n[0]+t[0])+e*(n[1]+t[1]),a=o*(n[0]+r[0])+u*(n[1]+r[1]),f=2*(i*(r[1]-t[1])-e*(r[0]-t[0]));if(Math.abs(f)<g){var s=Math.min(n[0],t[0],r[0]),l=Math.min(n[1],t[1],r[1]),h=.5*(Math.max(n[0],t[0],r[0])-s),p=.5*(Math.max(n[1],t[1],r[1])-l);return{origin:[s+h,l+p],radius:Math.sqrt(h*h+p*p)}}var v=[(u*c-e*a)/f,(i*a-o*c)/f],d=v[0]-n[0],m=v[1]-n[1];return{origin:v,radius:Math.sqrt(d*d+m*m)}},Gt=function(n){return.5*n.map((function(n,t,r){var i=r[(t+1)%r.length];return n[0]*i[1]-i[0]*n[1]})).reduce(_,0)},Vt=function(n){var t=1/(6*Gt(n));return n.map((function(n,t,r){var i=r[(t+1)%r.length],e=n[0]*i[1]-i[0]*n[1];return[(n[0]+i[0])*e,(n[1]+i[1])*e]})).reduce((function(n,t){return[n[0]+t[0],n[1]+t[1]]}),[0,0]).map((function(n){return n*t}))},Bt=function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=Array(n[0].length).fill(1/0),i=Array(n[0].length).fill(-1/0);n.forEach((function(n){return n.forEach((function(n,e){n<r[e]&&(r[e]=n-t),n>i[e]&&(i[e]=n+t)}))}));var e=i.map((function(n,t){return n-r[t]}));return{min:r,max:i,span:e}},Dt=Object.freeze({__proto__:null,makePolygonCircumradius:qt,makePolygonCircumradiusSide:Rt,makePolygonInradius:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return qt(n,t/Math.cos(Math.PI/n))},makePolygonInradiusSide:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Rt(n,t/Math.cos(Math.PI/n))},makePolygonSideLength:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return qt(n,t/2/Math.sin(Math.PI/n))},makePolygonSideLengthSide:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Rt(n,t/2/Math.sin(Math.PI/n))},makePolygonNonCollinear:function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:g,r=n.map((function(n,t,r){return[n,r[(t+1)%r.length]]})).map((function(n){return $(n[1],n[0])})),i=r.map((function(n,t,r){return[n,r[(t+r.length-1)%r.length]]})).map((function(n){return!ln(n[1],n[0],t)}));return n.filter((function(n,t){return i[t]}))},circumcircle:Tt,signedArea:Gt,centroid:Vt,boundingBox:Bt}),Ft=function(n,t,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:C,e=arguments.length>4&&void 0!==arguments[4]?arguments[4]:g,o=$(r,t),u=D(n),c=Math.sqrt(u);if(c<e)return!1;var a=rn(o,n.map((function(n){return n/c}))),f=J(o,n)/u;return Math.abs(a)<e&&i(f,e/c)},Zt=function(n,t,r){var i=n.map((function(n,i){return{point:Ft(t,r,n,z)?n:null,at_index:i}})).filter((function(n){return null!=n.point})),e=n.map((function(n,i,e){return{point:Ct(t,r,$(n,e[(i+1)%e.length]),e[(i+1)%e.length],C,q),at_index:i}})).filter((function(n){return null!=n.point}));if(2===e.length){var o=e.slice().sort((function(n,t){return n.at_index-t.at_index})),u=n.slice(o[1].at_index+1).concat(n.slice(0,o[0].at_index+1));u.push(o[0].point),u.push(o[1].point);var c=n.slice(o[0].at_index+1,o[1].at_index+1);return c.push(o[1].point),c.push(o[0].point),[u,c]}if(1===e.length&&1===i.length){i[0].type="v",e[0].type="e";var a=i.concat(e).sort((function(n,t){return n.at_index-t.at_index})),f=n.slice(a[1].at_index+1).concat(n.slice(0,a[0].at_index+1));"e"===a[0].type&&f.push(a[0].point),f.push(a[1].point);var s=n.slice(a[0].at_index+1,a[1].at_index+1);return"e"===a[1].type&&s.push(a[1].point),s.push(a[0].point),[f,s]}if(2===i.length){var l=i.slice().sort((function(n,t){return n.at_index-t.at_index}));return[n.slice(l[1].at_index).concat(n.slice(0,l[0].at_index+1)),n.slice(l[0].at_index,l[1].at_index+1)]}return[n.slice()]},Ut=Object.freeze({__proto__:null,splitConvexPolygon:Zt}),Ht=function n(t,r,i){var e=t.map((function(n,t){return{vector:i[t],origin:n}})).map((function(n,t,r){return Ct(n.vector,n.origin,r[(t+1)%r.length].vector,r[(t+1)%r.length].origin,N,N)})),o=r.map((function(n,t){return Wn(n.vector,n.origin,e[t],(function(n){return n}))}));if(3===t.length)return t.map((function(n){return{type:"skeleton",points:[n,e[0]]}})).concat([{type:"perpendicular",points:[o[0],e[0]]}]);var u=e.map((function(n,t){return on(n,o[t])})),c=0;u.forEach((function(n,t){n<u[c]&&(c=t)}));var a=[{type:"skeleton",points:[t[c],e[c]]},{type:"skeleton",points:[t[(c+1)%t.length],e[c]]},{type:"perpendicular",points:[o[c],e[c]]}],f=mt(cn(r[(c+r.length-1)%r.length].vector),r[(c+1)%r.length].vector),s=c===t.length-1;return t.splice(c,2,e[c]),r.splice(c,1),i.splice(c,2,f),s&&(t.splice(0,1),i.splice(0,1),r.push(r.shift())),a.concat(n(t,r,i))},Xt=function(n){var t=n.map((function(n,t,r){return[n,r[(t+1)%r.length]]})).map((function(n){return{vector:$(n[1],n[0]),origin:n[0]}})),i=n.map((function(n,t,r){return[(t-1+r.length)%r.length,t,(t+1)%r.length].map((function(n){return r[n]}))})).map((function(n){return[$(n[0],n[1]),$(n[2],n[1])]})).map((function(n){return mt.apply(void 0,r(n))}));return Ht(r(n),t,i)},Yt=Object.freeze({__proto__:null,straightSkeleton:Xt}),$t=function(n){return n>=1?0:n<=-1?Math.PI:Math.acos(n)},Wt=function(n,t,r){var i=t[0]-n[0],e=t[1]-n[1],o=i*Math.cos(r)+e*Math.sin(r),u=e*Math.cos(r)-i*Math.sin(r);return[n[0]+o,n[1]+u]},Jt=function(n,t,r,i){var e=arguments.length>4&&void 0!==arguments[4]?arguments[4]:g,o=n<r?n:r,u=n<r?r:n,c=n<r?t:i,a=n<r?i:t,f=[c[0]-a[0],c[1]-a[1]],s=Math.sqrt(Math.pow(f[0],2)+Math.pow(f[1],2));if(!(s<e)){var l=f.map((function(n,t){return n/s*u+a[t]}));if(Math.abs(u+o-s)<e||Math.abs(u-(o+s))<e)return[l];if(!(s+o<u||u+o<s)){var h=$t((o*o-s*s-u*u)/(-2*s*u)),p=Wt(a,l,+h),v=Wt(a,l,-h);return[p,v]}}},Kt=function(n,t,r,i){var e=arguments.length>4&&void 0!==arguments[4]?arguments[4]:z,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:g,u=Math.pow(r[0],2)+Math.pow(r[1],2),c=Math.sqrt(u),a=0===c?r:r.map((function(n){return n/c})),f=an(a),s=$(i,t),l=rn(s,a);if(!(Math.abs(l)>n+o)){var h=Math.sqrt(Math.pow(n,2)-Math.pow(l,2)),p=function(n,r){return t[r]-f[r]*l+a[r]*n},v=Math.abs(n-Math.abs(l))<o?[h].map((function(n){return[n,n].map(p)})):[-h,h].map((function(n){return[n,n].map(p)})),d=v.map((function(n){return n.map((function(n,t){return n-i[t]}))})).map((function(n){return n[0]*r[0]+r[1]*n[1]})).map((function(n){return n/u}));return v.filter((function(n,t){return e(d[t],o)}))}},Qt=function(n){for(var t=1;t<n.length;t+=1)if(!S(n[0],n[t]))return[n[0],n[t]]},nr=function(n,t,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:E,e=arguments.length>4&&void 0!==arguments[4]?arguments[4]:z,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:g,u=n.map((function(n,t,r){return[n,r[(t+1)%r.length]]})).map((function(n){return Ct($(n[1],n[0]),n[0],t,r,i,e,o)})).filter((function(n){return void 0!==n}));switch(u.length){case 0:return;case 1:return[u];default:return Qt(u)||[u[0]]}},tr=function(n,t,i){var e,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:E,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:C,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:g,a=nr(n,t,i,o,u,c);switch(u){case N:e=L;break;case q:e=E;break;default:return a}var f=nr(n,t,i,E,e,c);if(void 0!==f){var s=Qt(f);if(void 0===s)switch(u){case N:return at(n,i,I,c)?f:void 0;case q:return at(n,X(i,t),I,c)||at(n,i,I,c)?f:void 0;case C:default:return}return at(n,Q.apply(void 0,r(s)),I,c)?s:a}},rr={polygon:function(n){return[n]},rect:function(n){return[n]},circle:function(n){return[n.radius,n.origin]},line:function(n){return[n.vector,n.origin]},ray:function(n){return[n.vector,n.origin]},segment:function(n){return[n.vector,n.origin]}},ir={polygon:{line:function(n,t,i,e,o){return tr.apply(void 0,r(n).concat(r(t),[E,e,o]))},ray:function(n,t,i,e,o){return tr.apply(void 0,r(n).concat(r(t),[E,e,o]))},segment:function(n,t,i,e,o){return tr.apply(void 0,r(n).concat(r(t),[E,e,o]))}},circle:{circle:function(n,t,i,e,o){return Jt.apply(void 0,r(n).concat(r(t),[o]))},line:function(n,t,i,e,o){return Kt.apply(void 0,r(n).concat(r(t),[e,o]))},ray:function(n,t,i,e,o){return Kt.apply(void 0,r(n).concat(r(t),[e,o]))},segment:function(n,t,i,e,o){return Kt.apply(void 0,r(n).concat(r(t),[e,o]))}},line:{polygon:function(n,t,i,e,o){return tr.apply(void 0,r(t).concat(r(n),[E,i,o]))},circle:function(n,t,i,e,o){return Kt.apply(void 0,r(t).concat(r(n),[i,o]))},line:function(n,t,i,e,o){return Ct.apply(void 0,r(n).concat(r(t),[i,e,o]))},ray:function(n,t,i,e,o){return Ct.apply(void 0,r(n).concat(r(t),[i,e,o]))},segment:function(n,t,i,e,o){return Ct.apply(void 0,r(n).concat(r(t),[i,e,o]))}},ray:{polygon:function(n,t,i,e,o){return tr.apply(void 0,r(t).concat(r(n),[E,i,o]))},circle:function(n,t,i,e,o){return Kt.apply(void 0,r(t).concat(r(n),[i,o]))},line:function(n,t,i,e,o){return Ct.apply(void 0,r(t).concat(r(n),[e,i,o]))},ray:function(n,t,i,e,o){return Ct.apply(void 0,r(n).concat(r(t),[i,e,o]))},segment:function(n,t,i,e,o){return Ct.apply(void 0,r(n).concat(r(t),[i,e,o]))}},segment:{polygon:function(n,t,i,e,o){return tr.apply(void 0,r(t).concat(r(n),[E,i,o]))},circle:function(n,t,i,e,o){return Kt.apply(void 0,r(t).concat(r(n),[i,o]))},line:function(n,t,i,e,o){return Ct.apply(void 0,r(t).concat(r(n),[e,i,o]))},ray:function(n,t,i,e,o){return Ct.apply(void 0,r(t).concat(r(n),[e,i,o]))},segment:function(n,t,i,e,o){return Ct.apply(void 0,r(n).concat(r(t),[i,e,o]))}}},er={polygon:"polygon",rect:"polygon",circle:"circle",line:"line",ray:"ray",segment:"segment"},or={polygon:I,rect:I,circle:I,line:C,ray:N,segment:q},ur=function(n,t,r){var i=o(n),e=o(t),u=er[i],c=er[e],a=rr[i](n),f=rr[e](t),s=n.domain_function||or[i],l=t.domain_function||or[e];return ir[u][c](a,f,s,l,r)},cr=function(t,r){for(var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:g,e=0;e<2;e+=1)for(var o=0===e?t:r,u=0===e?r:t,c=function(n){var t=o[n],r=an($(o[(n+1)%o.length],o[n])),e=u.map((function(n){return $(n,t)})).map((function(n){return J(r,n)})),c=o[(n+2)%o.length],a=J(r,$(c,t))>0;if(e.map((function(n){return a?n<i:n>-i})).reduce((function(n,t){return n&&t}),!0))return{v:!1}},a=0;a<o.length;a+=1){var f=c(a);if("object"===n(f))return f.v}return!0},ar=function(n,t,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:I,e=arguments.length>4&&void 0!==arguments[4]?arguments[4]:g;return i(n-un(t,r),e)},fr=function(n,t,r,i){var e=arguments.length>4&&void 0!==arguments[4]?arguments[4]:C,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:C,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:g,c=rn(n,r),a=-c,f=[i[0]-t[0],i[1]-t[1]];if(Math.abs(c)<u){if(Math.abs(rn(f,n))>u)return!1;var s=f,l=X(s,r),h=J(n,n),p=J(s,n)/h,v=J(l,n)/h,d=p<v?p:v,m=p<v?v:p,y=d>1-u,M=m<u;return!y&&!M}var b=[-f[0],-f[1]],x=rn(f,r)/c,_=rn(b,n)/a;return e(x,u/V(n))&&o(_,u/V(r))},sr={polygon:function(n){return[n]},rect:function(n){return[n]},circle:function(n){return[n.radius,n.origin]},line:function(n){return[n.vector,n.origin]},ray:function(n){return[n.vector,n.origin]},segment:function(n){return[n.vector,n.origin]},vector:function(n){return[n]}},lr={polygon:{polygon:function(n,t,i,e,o){return cr.apply(void 0,r(n).concat(r(t),[o]))},vector:function(n,t,i,e,o){return at.apply(void 0,r(n).concat(r(t),[i,o]))}},circle:{vector:function(n,t,i,e,o){return ar.apply(void 0,r(n).concat(r(t),[I,o]))}},line:{line:function(n,t,i,e,o){return fr.apply(void 0,r(n).concat(r(t),[i,e,o]))},ray:function(n,t,i,e,o){return fr.apply(void 0,r(n).concat(r(t),[i,e,o]))},segment:function(n,t,i,e,o){return fr.apply(void 0,r(n).concat(r(t),[i,e,o]))},vector:function(n,t,i,e,o){return Ft.apply(void 0,r(n).concat(r(t),[i,o]))}},ray:{line:function(n,t,i,e,o){return fr.apply(void 0,r(t).concat(r(n),[e,i,o]))},ray:function(n,t,i,e,o){return fr.apply(void 0,r(n).concat(r(t),[i,e,o]))},segment:function(n,t,i,e,o){return fr.apply(void 0,r(n).concat(r(t),[i,e,o]))},vector:function(n,t,i,e,o){return Ft.apply(void 0,r(n).concat(r(t),[i,o]))}},segment:{line:function(n,t,i,e,o){return fr.apply(void 0,r(t).concat(r(n),[e,i,o]))},ray:function(n,t,i,e,o){return fr.apply(void 0,r(t).concat(r(n),[e,i,o]))},segment:function(n,t,i,e,o){return fr.apply(void 0,r(n).concat(r(t),[i,e,o]))},vector:function(n,t,i,e,o){return Ft.apply(void 0,r(n).concat(r(t),[i,o]))}},vector:{polygon:function(n,t,i,e,o){return at.apply(void 0,r(t).concat(r(n),[e,o]))},circle:function(n,t,i,e,o){return ar.apply(void 0,r(t).concat(r(n),[I,o]))},line:function(n,t,i,e,o){return Ft.apply(void 0,r(t).concat(r(n),[e,o]))},ray:function(n,t,i,e,o){return Ft.apply(void 0,r(t).concat(r(n),[e,o]))},segment:function(n,t,i,e,o){return Ft.apply(void 0,r(t).concat(r(n),[e,o]))},vector:function(n,t,i,e,o){return S.apply(void 0,r(n).concat(r(t),[o]))}}},hr={polygon:"polygon",rect:"polygon",circle:"circle",line:"line",ray:"ray",segment:"segment",vector:"vector"},pr={polygon:I,rect:I,circle:I,line:C,ray:N,segment:q,vector:C},vr=function(n,t,r){var i=o(n),e=o(t),u=hr[i],c=hr[e],a=sr[i](n),f=sr[e](t),s=n.domain_function||pr[i],l=t.domain_function||pr[e];return lr[u][c](a,f,s,l,r)},gr={preserve:{magnitude:function(){return V(this)},isEquivalent:function(){return S(this,zn(arguments))},isParallel:function(){return ln.apply(void 0,r(c(this,zn(arguments))))},isCollinear:function(n){return vr(this,n)},dot:function(){return J.apply(void 0,r(c(this,zn(arguments))))},distanceTo:function(){return on.apply(void 0,r(c(this,zn(arguments))))},overlap:function(n){return vr(this,n)}},vector:{copy:function(){return r(this)},normalize:function(){return F(this)},scale:function(){return U(this,arguments[0])},flip:function(){return cn(this)},rotate90:function(){return an(this)},rotate270:function(){return fn(this)},cross:function(){return en(u(3,this),u(3,zn(arguments)))},transform:function(){return dn(Dn(arguments),u(3,this))},add:function(){return X(this,u(this.length,zn(arguments)))},subtract:function(){return $(this,u(this.length,zn(arguments)))},rotateZ:function(n,t){return dn(Dn(ut(n,t)),u(3,this))},lerp:function(n,t){return tn(this,u(this.length,zn(n)),t)},midpoint:function(){return Q.apply(void 0,r(c(this,zn(arguments))))},bisect:function(){return yt(this,zn(arguments))}}},dr={};Object.keys(gr.preserve).forEach((function(n){dr[n]=gr.preserve[n]})),Object.keys(gr.vector).forEach((function(n){dr[n]=function(){return v.vector.apply(v,r(gr.vector[n].apply(this,arguments)))}}));var mr={fromAngle:function(n){return v.vector(Math.cos(n),Math.sin(n))},fromAngleDegrees:function(n){return v.vector.fromAngle(n*m)}},yr={vector:{P:Array.prototype,A:function(){this.push.apply(this,r(zn(arguments)))},G:{x:function(){return this[0]},y:function(){return this[1]},z:function(){return this[2]}},M:dr,S:mr}},Mr={fromPoints:function(){var n=Cn(arguments);return this.constructor({vector:$(n[1],n[0]),origin:n[0]})},fromAngle:function(){var n=arguments[0]||0;return this.constructor({vector:[Math.cos(n),Math.sin(n)],origin:[0,0]})},perpendicularBisector:function(){var n=Cn(arguments);return this.constructor({vector:an($(n[1],n[0])),origin:nn(n[0],n[1])})}},br={isParallel:function(){var n=c(this.vector,Nn(arguments).vector);return ln.apply(void 0,r(n))},isCollinear:function(){var n=Nn(arguments);return Ft(this.vector,this.origin,n.origin)&&ln.apply(void 0,r(c(this.vector,n.vector)))},isDegenerate:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g;return sn(this.vector,n)},reflectionMatrix:function(){return v.matrix(Sn(this.vector,this.origin))},nearestPoint:function(){var n=zn(arguments);return v.vector(Wn(this.vector,this.origin,n,this.clip_function))},transform:function(){var n=this.dimension,t=mn(Dn(arguments),u(3,this.vector),u(3,this.origin));return this.constructor(u(n,t.vector),u(n,t.origin))},translate:function(){var n=X.apply(void 0,r(c(this.origin,zn(arguments))));return this.constructor(this.vector,n)},intersect:function(){return ur.apply(void 0,[this].concat(Array.prototype.slice.call(arguments)))},overlap:function(){return vr.apply(void 0,[this].concat(Array.prototype.slice.call(arguments)))},bisect:function(n,t){var r=this,i=Nn(n);return Pt(this.vector,this.origin,i.vector,i.origin,t).map((function(n){return r.constructor(n)}))}},xr={line:{P:Object.prototype,A:function(){var n=Nn.apply(void 0,arguments);this.vector=v.vector(n.vector),this.origin=v.vector(u(this.vector.length,n.origin));var t=Zn({vector:this.vector,origin:this.origin});this.normal=t.normal,this.distance=t.distance,Object.defineProperty(this,"domain_function",{writable:!0,value:z})},G:{dimension:function(){return[this.vector,this.origin].map((function(n){return n.length})).reduce((function(n,t){return Math.max(n,t)}),0)}},M:Object.assign({},br,{inclusive:function(){return this.domain_function=z,this},exclusive:function(){return this.domain_function=C,this},clip_function:function(n){return n},svgPath:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2e4,t=X(this.origin,U(this.vector,-n/2)),r=U(this.vector,n);return"M".concat(t[0]," ").concat(t[1],"l").concat(r[0]," ").concat(r[1])}}),S:Object.assign({fromNormalDistance:function(){return this.constructor(Un(arguments[0]))}},Mr)}},_r={ray:{P:Object.prototype,A:function(){var n=Nn.apply(void 0,arguments);this.vector=v.vector(n.vector),this.origin=v.vector(u(this.vector.length,n.origin)),Object.defineProperty(this,"domain_function",{writable:!0,value:L})},G:{dimension:function(){return[this.vector,this.origin].map((function(n){return n.length})).reduce((function(n,t){return Math.max(n,t)}),0)}},M:Object.assign({},br,{inclusive:function(){return this.domain_function=L,this},exclusive:function(){return this.domain_function=N,this},flip:function(){return v.ray(cn(this.vector),this.origin)},scale:function(n){return v.ray(this.vector.scale(n),this.origin)},normalize:function(){return v.ray(this.vector.normalize(),this.origin)},clip_function:R,svgPath:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e4,t=this.vector.scale(n);return"M".concat(this.origin[0]," ").concat(this.origin[1],"l").concat(t[0]," ").concat(t[1])}}),S:Mr}},Pr={segment:{P:Array.prototype,A:function(){var n=Ln.apply(void 0,arguments);this.push.apply(this,r([n[0],n[1]].map((function(n){return v.vector(n)})))),this.vector=v.vector($(this[1],this[0])),this.origin=this[0],Object.defineProperty(this,"domain_function",{writable:!0,value:E})},G:{points:function(){return this},magnitude:function(){return V(this.vector)},dimension:function(){return[this.vector,this.origin].map((function(n){return n.length})).reduce((function(n,t){return Math.max(n,t)}),0)}},M:Object.assign({},br,{inclusive:function(){return this.domain_function=E,this},exclusive:function(){return this.domain_function=q,this},clip_function:T,transform:function(){for(var n=this.points[0].length,t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];var e=Dn(r),o=this.points.map((function(n){return u(3,n)})).map((function(n){return dn(e,n)})).map((function(t){return u(n,t)}));return v.segment(o)},translate:function(){var n=zn(arguments),t=this.points.map((function(t){return X.apply(void 0,r(c(t,n)))}));return v.segment(t)},midpoint:function(){return v.vector(nn(this.points[0],this.points[1]))},svgPath:function(){var n=this.points.map((function(n){return"".concat(n[0]," ").concat(n[1])}));return["M","L"].map((function(t,r){return"".concat(t).concat(n[r])})).join("")}}),S:{fromPoints:function(){return this.constructor.apply(this,arguments)}}}},Ar=function(n,t,r,i,e,o){var u=Math.cos(e),c=Math.sin(e),a=Math.cos(o),f=Math.sin(o);return[n+u*r*a+-c*i*f,t+c*r*a+u*i*f]},wr=function(n,t,r,i,e,o,u){var c=o;if(c<0&&!Number.isNaN(c))for(;c<0;)c+=2*Math.PI;var a=u>2*Math.PI?2*Math.PI:u,f=Ar(n,t,r,i,e,c),s=Ar(n,t,r,i,e,c+a/2),l=Ar(n,t,r,i,e,c+a),h=a/2>Math.PI?1:0,p=a/2>0?1:0;return{x1:f[0],y1:f[1],x2:s[0],y2:s[1],x3:l[0],y3:l[1],fa:h,fs:p}},jr=function(n){return f(n,4)},Or=function(n,t,r,i,e,o,u){return"A".concat(jr(n)," ").concat(jr(t)," ").concat(jr(r)," ").concat(jr(i)," ").concat(jr(e)," ").concat(jr(o)," ").concat(jr(u))},Sr={circle:{A:function(){var n=Gn.apply(void 0,arguments);this.radius=n.radius,this.origin=v.vector.apply(v,r(n.origin))},G:{x:function(){return this.origin[0]},y:function(){return this.origin[1]},z:function(){return this.origin[2]}},M:{nearestPoint:function(){return v.vector(Kn(this.radius,this.origin,zn(arguments)))},intersect:function(n){return ur(this,n)},overlap:function(n){return vr(this,n)},svgPath:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2*Math.PI,r=wr(this.origin[0],this.origin[1],this.radius,this.radius,0,n,t),i=Or(this.radius,this.radius,0,r.fa,r.fs,r.x2,r.y2),e=Or(this.radius,this.radius,0,r.fa,r.fs,r.x3,r.y3);return"M".concat(r.x1," ").concat(r.y1).concat(i).concat(e)},points:function(){var n=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:128;return Array.from(Array(t)).map((function(n,r){return 2*Math.PI/t*r})).map((function(t){return[n.origin[0]+n.radius*Math.cos(t),n.origin[1]+n.radius*Math.sin(t)]}))},polygon:function(){return v.polygon(this.points(arguments[0]))},segments:function(){var n=this.points(arguments[0]);return n.map((function(t,r){var i=(r+1)%n.length;return[t,n[i]]}))}},S:{fromPoints:function(){if(3===arguments.length){var n=Tt.apply(void 0,arguments);return this.constructor(n.radius,n.origin)}return this.constructor.apply(this,arguments)},fromThreePoints:function(){var n=Tt.apply(void 0,arguments);return this.constructor(n.radius,n.origin)}}}},kr=function(n,t,r,i){var e=t>r,o=e?Math.pow(t,2)-Math.pow(r,2):Math.pow(r,2)-Math.pow(t,2),u=Math.sqrt(o),c=e?Math.cos(i):Math.sin(i),a=e?Math.sin(i):Math.cos(i);return[v.vector(n[0]+u*c,n[1]+u*a),v.vector(n[0]-u*c,n[1]-u*a)]},Ir={ellipse:{A:function(){var n=h(arguments).filter((function(n){return!Number.isNaN(n)})),t=u(5,n);this.rx=t[0],this.ry=t[1],this.origin=v.vector(t[2],t[3]),this.spin=t[4],this.foci=kr(this.origin,this.rx,this.ry,this.spin)},G:{x:function(){return this.origin[0]},y:function(){return this.origin[1]}},M:{svgPath:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2*Math.PI,r=wr(this.origin[0],this.origin[1],this.rx,this.ry,this.spin,n,t),i=Or(this.rx,this.ry,this.spin/Math.PI*180,r.fa,r.fs,r.x2,r.y2),e=Or(this.rx,this.ry,this.spin/Math.PI*180,r.fa,r.fs,r.x3,r.y3);return"M".concat(r.x1," ").concat(r.y1).concat(i).concat(e)},points:function(){var n=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:128;return Array.from(Array(t)).map((function(n,r){return 2*Math.PI/t*r})).map((function(t){return Ar(n.origin.x,n.origin.y,n.rx,n.ry,n.spin,t)}))},polygon:function(){return v.polygon(this.points(arguments[0]))},segments:function(){var n=this.points(arguments[0]);return n.map((function(t,r){var i=(r+1)%n.length;return[t,n[i]]}))}},S:{}}},zr={area:function(){return Gt(this)},centroid:function(){return v.vector(Vt(this))},boundingBox:function(){return Bt(this)},straightSkeleton:function(){return Xt(this)},scale:function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Vt(this),r=this.map((function(n){return[0,1].map((function(r,i){return n[i]-t[i]}))})).map((function(r){return r.map((function(i,e){return t[e]+r[e]*n}))}));return this.constructor.fromPoints(r)},rotate:function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Vt(this),r=this.map((function(r){var i=[r[0]-t[0],r[1]-t[1]],e=Math.sqrt(Math.pow(i[0],2)+Math.pow(i[1],2)),o=Math.atan2(i[1],i[0]);return[t[0]+Math.cos(o+n)*e,t[1]+Math.sin(o+n)*e]}));return v.polygon(r)},translate:function(){var n=zn.apply(void 0,arguments),t=this.map((function(t){return t.map((function(t,r){return t+n[r]}))}));return this.constructor.fromPoints(t)},transform:function(){var n=Dn.apply(void 0,arguments),t=this.map((function(t){return dn(n,u(3,t))}));return v.polygon(t)},nearest:function(){var n=zn.apply(void 0,arguments),t=Jn(this,n);return void 0===t?void 0:Object.assign(t,{edge:this.sides[t.i]})},split:function(){var n=Nn.apply(void 0,arguments),t=Zt;return t(this,n.vector,n.origin).map((function(n){return v.polygon(n)}))},overlap:function(){return vr.apply(void 0,[this].concat(Array.prototype.slice.call(arguments)))},intersect:function(){return ur.apply(void 0,[this].concat(Array.prototype.slice.call(arguments)))},clip:function(n,t){var r=n.domain_function?n.domain_function:z,i=ht(this,n.vector,n.origin,this.domain_function,r,t);return i?v.segment(i):void 0},svgPath:function(){var n=Array(this.length).fill("L");return n[0]="M","".concat(this.map((function(t,r){return"".concat(n[r]).concat(t[0]," ").concat(t[1])})).join(""),"z")}},Cr=function(n){return[[n.x,n.y],[n.x+n.width,n.y],[n.x+n.width,n.y+n.height],[n.x,n.y+n.height]]},Lr={rect:{P:Array.prototype,A:function(){var n=Rn.apply(void 0,arguments);this.width=n.width,this.height=n.height,this.origin=v.vector(n.x,n.y),this.push.apply(this,r(Cr(this))),Object.defineProperty(this,"domain_function",{writable:!0,value:k})},G:{x:function(){return this.origin[0]},y:function(){return this.origin[1]},center:function(){return v.vector(this.origin[0]+this.width/2,this.origin[1]+this.height/2)}},M:Object.assign({},zr,{inclusive:function(){return this.domain_function=k,this},exclusive:function(){return this.domain_function=I,this},area:function(){return this.width*this.height},segments:function(){return[[[(n=this).x,n.y],[n.x+n.width,n.y]],[[n.x+n.width,n.y],[n.x+n.width,n.y+n.height]],[[n.x+n.width,n.y+n.height],[n.x,n.y+n.height]],[[n.x,n.y+n.height],[n.x,n.y]]];var n},svgPath:function(){return"M".concat(this.origin.join(" "),"h").concat(this.width,"v").concat(this.height,"h").concat(-this.width,"Z")}}),S:{fromPoints:function(){var n=Bt(Cn(arguments));return v.rect(n.min[0],n.min[1],n.span[0],n.span[1])}}}},Nr={polygon:{P:Array.prototype,A:function(){this.push.apply(this,r(l(arguments))),this.sides=this.map((function(n,t,r){return[n,r[(t+1)%r.length]]})),this.vectors=this.sides.map((function(n){return $(n[1],n[0])})),Object.defineProperty(this,"domain_function",{writable:!0,value:k})},G:{isConvex:function(){},points:function(){return this}},M:Object.assign({},zr,{inclusive:function(){return this.domain_function=k,this},exclusive:function(){return this.domain_function=I,this},segments:function(){return this.sides}}),S:{fromPoints:function(){return this.constructor.apply(this,arguments)},regularPolygon:function(){return this.constructor(qt.apply(void 0,arguments))},convexHull:function(){return this.constructor(It.apply(void 0,arguments))}}}},Er={polyline:{P:Array.prototype,A:function(){this.push.apply(this,r(l(arguments)))},G:{points:function(){return this}},M:{svgPath:function(){var n=Array(this.length).fill("L");return n[0]="M","".concat(this.map((function(t,r){return"".concat(n[r]).concat(t[0]," ").concat(t[1])})).join(""))}},S:{fromPoints:function(){return this.constructor.apply(this,arguments)}}}},qr=function(n,t){for(var r=0;r<12;r+=1)n[r]=t[r];return n},Rr={matrix:{P:Array.prototype,A:function(){var n=this;Dn(arguments).forEach((function(t){return n.push(t)}))},G:{},M:{copy:function(){return v.matrix.apply(v,r(Array.from(this)))},set:function(){return qr(this,Dn(arguments))},isIdentity:function(){return gn(this)},multiply:function(n){return qr(this,yn(this,n))},determinant:function(){return Mn(this)},inverse:function(){return qr(this,bn(this))},translate:function(n,t,r){return qr(this,yn(this,xn(n,t,r)))},rotateX:function(n){return qr(this,yn(this,Pn(n)))},rotateY:function(n){return qr(this,yn(this,An(n)))},rotateZ:function(n){return qr(this,yn(this,wn(n)))},rotate:function(n,t,r){var i=jn(n,t,r);return qr(this,yn(this,i))},scale:function(n){return qr(this,yn(this,On(n)))},reflectZ:function(n,t){var r=Sn(n,t);return qr(this,yn(this,r))},transform:function(){for(var n=arguments.length,t=new Array(n),r=0;r<n;r++)t[r]=arguments[r];return v.vector(dn(this,u(3,zn(t))))},transformVector:function(n){return v.vector(dn(this,u(3,zn(n))))},transformLine:function(){for(var n=arguments.length,t=new Array(n),r=0;r<n;r++)t[r]=arguments[r];var i=Nn(t);return v.line(mn(this,i.vector,i.origin))}},S:{}}},Tr=Object.assign({},yr,xr,_r,Pr,Sr,Ir,Lr,Nr,Er,Rr),Gr=function(n,t){var r=Object.create(Tr[n].proto);return Tr[n].A.apply(r,t),r};Object.assign(v,{vector:function(){return Gr("vector",arguments)},line:function(){return Gr("line",arguments)},ray:function(){return Gr("ray",arguments)},segment:function(){return Gr("segment",arguments)},circle:function(){return Gr("circle",arguments)},ellipse:function(){return Gr("ellipse",arguments)},rect:function(){return Gr("rect",arguments)},polygon:function(){return Gr("polygon",arguments)},polyline:function(){return Gr("polyline",arguments)},matrix:function(){return Gr("matrix",arguments)}}),Object.keys(Tr).forEach((function(n){var t={};t.prototype=null!=Tr[n].P?Object.create(Tr[n].P):Object.create(Object.prototype),t.prototype.constructor=t,v[n].prototype=t.prototype,v[n].prototype.constructor=v[n],Object.keys(Tr[n].G).forEach((function(r){return Object.defineProperty(t.prototype,r,{get:Tr[n].G[r]})})),Object.keys(Tr[n].M).forEach((function(r){return Object.defineProperty(t.prototype,r,{value:Tr[n].M[r]})})),Object.keys(Tr[n].S).forEach((function(t){return Object.defineProperty(v[n],t,{value:Tr[n].S[t].bind(v[n].prototype)})})),Tr[n].proto=t.prototype}));var Vr=v;return Vr.core=Object.assign(Object.create(null),M,p,Fn,G,hn,rt,Ot,zt,Lt,Dt,Ot,Ut,Yt,ct,kn,Qn,Hn,{enclosingPolygonPolygon:function(n,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:k,i=n.map((function(n){return at(t,n,r)})).reduce((function(n,t){return n||t}),!1),e=t.map((function(n){return at(t,n,r)})).reduce((function(n,t){return n&&t}),!0);return!i&&e},intersectConvexPolygonLine:tr,intersectCircleCircle:Jt,intersectCircleLine:Kt,intersectLineLine:Ct,overlapConvexPolygons:cr,overlapConvexPolygonPoint:at,overlapBoundingBoxes:function(n,t){for(var r=n.min.length>t.min.length?t.min.length:n.min.length,i=0;i<r;i+=1)if(n.min[i]>t.max[i]||n.max[i]<t.min[i])return!1;return!0},overlapLineLine:fr,overlapLinePoint:Ft,clipLineConvexPolygon:ht,clipPolygonPolygon:function(n,t){var r,i,e,o,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:g,c=function(n){return(i[0]-r[0])*(n[1]-r[1])>(i[1]-r[1])*(n[0]-r[0])+u},a=function(){var n=[r[0]-i[0],r[1]-i[1]],t=[e[0]-o[0],e[1]-o[1]],u=r[0]*i[1]-r[1]*i[0],c=e[0]*o[1]-e[1]*o[0],a=1/(n[0]*t[1]-n[1]*t[0]);return[(u*t[0]-c*n[0])*a,(u*t[1]-c*n[1])*a]},f=n;for(var s in r=t[t.length-1],t){i=t[s];var l=f;for(var h in f=[],e=l[l.length-1],l)c(o=l[h])?(c(e)||f.push(a()),f.push(o)):c(e)&&f.push(a()),e=o;r=i}return 0===f.length?void 0:f}}),Vr.typeof=o,Vr.intersect=ur,Vr.overlap=vr,Vr}));
